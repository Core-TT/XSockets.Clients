angular.module("xsockets",[]).provider("xs",[function(){var n=this;this.instance=undefined;this.$get=["$q","$rootScope",function(t,i){if(n.controllers.length===0)throw"You need to configure the controllers";n.instance=new XSockets.WebSocket(n.url,n.controllers);n.instance.onconnected=function(){};var r=function(r){var f,u=n.instance.controller(r),e=function(n,t,i){return u.invoke(n,t),i&&i(n,t),this},o=r,s=function(n,t){u.on(n,function(n){i.$apply(function(i){t(n,i)})});return this},h=function(n,t,r){return u.subscribe(n,function(n){i.$apply(function(i){t(n,i)})},typeof r=="function"?function(n){i.$apply(function(t){r(n,t)})}:undefined),this},c=function(n,t,i){return u.publish(n,t),i&&i(n,t),this},l=function(n,t){return u.unsubscribe(n),t&&t(n),this},a=function(n){return u.close(),n&&n(),this},v=function(){var n=t.defer();return u.onclose=function(t){n.resolve(t)},n.promise},y=function(n,t,r){u.one(n,function(n){i.$apply(function(i){t(n,i)},r)});return this},p=function(n,t,r){return u.many(n,t,function(n){i.$apply(function(t){r(n,t)})}),this},w=function(){var n=t.defer();return u.onerror=function(t){n.resolve(t)},n.promise},b=function(){var n=t.defer();return u.onopen=function(t){f=t;n.resolve(t)},n.promise},k=function(n,t){u.setEnum(n,t)},d=function(n,t){u.setProperty(n,t)};return{controllerName:o,on:s,invoke:e,publish:c,subscribe:h,unsubscribe:l,onopen:b(),onclose:v(),onerror:w(),clientInfo:f,close:a,one:y,many:p,setEnum:k,setProperty:d}},u=function(){return n.controllerInstances};return{controllers:u,controller:r}}];this.url="ws://127.0.0.1:4502";this.controllers=[]}]);angular.module("xsockets").factory("xsDataSync",[function(){return function(n){var t=n.controllerName,i=this;this.oninit=function(){throw"You need to add an oninit event handler";};this.onupdated=function(){throw"You need to add an onupdated event handler";};this.ondeleted=function(){throw"You need to add an ondeleted event handler";};n.on("init:"+t,function(n){i.oninit(n)});return n.subscribe("update:"+t,function(n){i.onupdated(n)}),n.subscribe("add:"+t,function(n){i.onupdated(n)}),n.subscribe("delete:"+t,function(n){i.ondeleted(n)}),this.addItem=function(i){n.invoke("update",{Topic:t,Object:i})},this.updateItem=function(t){n.invoke("update",t)},this.deleteItem=function(t){n.invoke("delete",{Id:t.Id})},this}}]);
//# sourceMappingURL=xsocketsProvider.min.js.map
